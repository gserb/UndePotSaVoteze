<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
  #voteSections-city p {
    font-weight: bold;
  }
  .info-panel { 
    margin: 2em;          
    width: 20em;
    max-height: 30em;
    position: absolute;
    top: 0px;
    right: 0px;
    overflow: auto;}
    </style>
    <script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCKBB8H27s0LSER0CW_FbFG0NnTdz93L3g&sensor=true">
    </script>
    <script type="text/javascript">
    var map;
    function initialize() {

      var mapOptions = {
        center: new google.maps.LatLng(44.45102, 26.0492532),
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    }
    </script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>   
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>

    <div class="panel panel-primary info-panel">
      <div class='panel-heading'>Unde pot sa votez ? Alege o localitate</div>
      <div class="panel-body" id='voteSections-city' hidden> 
        <!-- <span class="glyphicon glyphicon-map-marker"></span> -->
        Ati selectat: <p></p>
        <!-- <span class="glyphicon glyphicon-align-justify"></span>  -->
        Sectii de votare disponibile: 
      </div>
      <ul class="list-group" id='voteSections-list' hidden>       
      </ul>
    </div>

    <script type="text/javascript">
    $(document).ready(function() {

      $('.panel-heading').on('click', function(){
        $('#voteSections-city, #voteSections-list').toggle();
      });

      $.getJSON("listaCuLocation.json", function(json1) {
        $.each(json1, function(key, data) {
          var latLng = new google.maps.LatLng(data.Longitudine, data.Latitudine); 
            // Creating a marker and putting it on the map
            var marker = new google.maps.Marker({
              position: latLng,
              title: data.Localitate
            });
            marker.sectii = data.Sectii;
            marker.setMap(map);

            //populate list on click on a marker
            google.maps.event.addListener(marker, "click", function() {
              $('#voteSections-list >').remove();
              $('#voteSections-city p').text(marker.title);
              $.each(marker.sectii, function(key, data){
                $('#voteSections-list').append('<li class="list-group-item">' + data + '</li>');
              })
              $('.panel-heading').text('Unde pot sa votez ?');
              $('#voteSections-city, #voteSections-list').show();
            });

          });
      });

      

    });
    </script>
  </body>
  </html>